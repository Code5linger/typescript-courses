{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/domain-modeling-with-ts/02-value-objects-and-entities/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"monorepos-v2","name":"TypeScript Monorepos v2","summary":null},{"id":"domain-modeling-with-ts","name":"Domain modeling for humans and AI","summary":"Learn how to model a domain in TypeScript, and how to collaborate with domain experts and agentic AI coding tools to build a software system that solves real problems.\n"},{"id":"fundamentals-v3","name":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"fundamentals-v4","name":"TypeScript Fundamentals v4","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","name":"Intermediate TypeScript v1","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"intermediate-v2","name":"Intermediate TypeScript v2","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","name":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"enterprise-v2","name":"Enterprise-Scale TypeScript v2","summary":"Learn how to manage large TypeScript code bases with confidence and ease.\nIn this course, Mike shares his knowledge from years of experience working\nwith teams who maintain TypeScript projects with hundreds of regular full-time\ncontributors and 100K+ lines of code.\n"},{"id":"full-stack-typescript","name":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"}]}},"markdownRemark":{"id":"1a744d31-a41b-5293-b54d-faeb69283f0a","excerpt":"Value Objects? Value Objects represent descriptive aspects of the domain that do not possess a unique identity. Instead, they are defined entirely by their…","html":"<h2 id=\"value-objects\" style=\"position:relative;\"><a href=\"#value-objects\" aria-label=\"value objects permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Value Objects?</h2>\n<p>Value Objects represent <strong>descriptive aspects of the domain that do not possess a unique identity</strong>. Instead, they are defined entirely by their attributes. If two value objects have the same attribute values, they are considered equal.</p>\n<p>Several examples already exist the workshop codebase. For example</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #6E7781\">// packages/server/src/values/rgb-color.ts</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { IRGBColor } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"@peashoot/types\"</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { Column } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"typeorm\"</span></div><div class='line'></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">class</span><span style=\"color: #24292F\"> </span><span style=\"color: #953800\">RGBColor</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">implements</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">IRGBColor</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  @</span><span style=\"color: #8250DF\">Column</span><span style=\"color: #24292F\">()</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #953800\">red</span><span style=\"color: #CF222E\">!:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">  @</span><span style=\"color: #8250DF\">Column</span><span style=\"color: #24292F\">()</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #953800\">green</span><span style=\"color: #CF222E\">!:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">  @</span><span style=\"color: #8250DF\">Column</span><span style=\"color: #24292F\">()</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #953800\">blue</span><span style=\"color: #CF222E\">!:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">  @</span><span style=\"color: #8250DF\">Column</span><span style=\"color: #24292F\">({ default: </span><span style=\"color: #0550AE\">1</span><span style=\"color: #24292F\"> })</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #953800\">alpha</span><span style=\"color: #CF222E\">!:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>There are a couple of things going on here.</p>\n<h3 id=\"typeorm\" style=\"position:relative;\"><a href=\"#typeorm\" aria-label=\"typeorm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TypeORM</h3>\n<p>We’re using <a href=\"https://typeorm.io/\">TypeORM</a> as our Object Relational Mapping (ORM) tool. These <code>@Column</code> decorators indicate that each of these class fields should be persisted in a database (in this case a SQLite DB at <code>packages/server/peashoot.sqlite</code>)</p>\n<h3 id=\"the-peashoottypes-package\" style=\"position:relative;\"><a href=\"#the-peashoottypes-package\" aria-label=\"the peashoottypes package permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The <code>@peashoot/types</code> package</h3>\n<p>This app has a client-server architecture, and <code>@peashoot/types</code> is where we’re storing a very specific set of things</p>\n<ul>\n<li>Common types for request/response shapes - <code>packages/types/src/resources/*</code></li>\n<li>Common types that are included in those request/response shapes - <code>packages/types/src/entities/*</code></li>\n<li>Some type guards and utility functions that go along with those types</li>\n</ul>\n<p>In this package we use <a href=\"https://zod.dev/\">Zod</a> schemas which look like this</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">RGBColorSchema</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> z.</span><span style=\"color: #8250DF\">object</span><span style=\"color: #24292F\">({</span></div><div class='line'><span style=\"color: #24292F\">  red: z.</span><span style=\"color: #8250DF\">number</span><span style=\"color: #24292F\">(),</span></div><div class='line'><span style=\"color: #24292F\">  green: z.</span><span style=\"color: #8250DF\">number</span><span style=\"color: #24292F\">(),</span></div><div class='line'><span style=\"color: #24292F\">  blue: z.</span><span style=\"color: #8250DF\">number</span><span style=\"color: #24292F\">(),</span></div><div class='line'><span style=\"color: #24292F\">  alpha: z.</span><span style=\"color: #8250DF\">number</span><span style=\"color: #24292F\">().</span><span style=\"color: #8250DF\">optional</span><span style=\"color: #24292F\">(),</span></div><div class='line'><span style=\"color: #24292F\">})</span></div></code></div></pre>\n<h2 id=\"entities\" style=\"position:relative;\"><a href=\"#entities\" aria-label=\"entities permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Entities</h2>\n<p>In DDD, Entities as persisted, mutable objects. In our app, this means they’ll have IDs and will each relate to a table in our database. There’s a relevant example in our app already</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { Entity, Column } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">'typeorm'</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { PeashootEntity } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">'./peashoot-entity'</span></div><div class='line'></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">@</span><span style=\"color: #8250DF\">Entity</span><span style=\"color: #24292F\">()</span></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">class</span><span style=\"color: #24292F\"> </span><span style=\"color: #953800\">Location</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">extends</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">PeashootEntity</span><span style=\"color: #24292F\">&lt;</span><span style=\"color: #0A3069\">'loc'</span><span style=\"color: #24292F\">&gt; {</span></div><div class='line'><span style=\"color: #24292F\">\t</span><span style=\"color: #CF222E\">constructor</span><span style=\"color: #24292F\">() {</span></div><div class='line'><span style=\"color: #24292F\">\t\t</span><span style=\"color: #0550AE\">super</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">'loc'</span><span style=\"color: #24292F\">)</span></div><div class='line'><span style=\"color: #24292F\">\t}</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">\t@</span><span style=\"color: #8250DF\">Column</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">'text'</span><span style=\"color: #24292F\">)</span></div><div class='line'><span style=\"color: #24292F\">\t</span><span style=\"color: #953800\">name</span><span style=\"color: #CF222E\">!:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">string</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">\t@</span><span style=\"color: #8250DF\">Column</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">'text'</span><span style=\"color: #24292F\">)</span></div><div class='line'><span style=\"color: #24292F\">\t</span><span style=\"color: #953800\">region</span><span style=\"color: #CF222E\">!:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">string</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">\t@</span><span style=\"color: #8250DF\">Column</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">'text'</span><span style=\"color: #24292F\">)</span></div><div class='line'><span style=\"color: #24292F\">\t</span><span style=\"color: #953800\">country</span><span style=\"color: #CF222E\">!:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">string</span></div></code></div></pre>\n<p>the base class <code>PeashootEntity&#x3C;'loc'></code> takes care of the id field for us, and prefixes it with <code>loc_</code> so that they’re easy to identify if we ever see them logged.</p>\n<p>The <code>@Entity</code> decorator is really important here. This is what means these are persisted in a table (as opposed to the value-objects which are <em>embedded</em> in the tables of entities they belong to)</p>\n<h2 id=\"our-task\" style=\"position:relative;\"><a href=\"#our-task\" aria-label=\"our task permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Our task</h2>\n<p>Our app contains a calculator UI\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eeee3077a76c1eb3e3d8cfbb7ebde1d2/21b4d/calculator.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+ElEQVQoz5XO326CMBQG8L7/C7BdebG9gWbJlvgA7gpoF290cX8ESQVKK9iWnp4FdYsEtmRffhc9Sb+eEiklpSwMwyiKoyhm7IUxRimNY7pYPHPOEdF7j2MhDqCS6qj1eYarOOd+q32XnUt3WVGUdd1IqQDA9wMwwrnudYKISilRilKIPC+G5UHQ+8sHiTE2zfb7XGS8yItKVGp01Y/WOmu7FeiReA/WHKw+6Ea2pkaEP/k0edsl700twLWk0X6ddFbby+Hs9WQ9sNyY5casttBoTz44BlO8mfUEM5w84v0c7+Y4eepduH3oBFP85EgA8Gj/w5xYBMAvgET9qNYSfWQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"calculator\"\n        title=\"calculator\"\n        src=\"/static/eeee3077a76c1eb3e3d8cfbb7ebde1d2/00d43/calculator.png\"\n        srcset=\"/static/eeee3077a76c1eb3e3d8cfbb7ebde1d2/63868/calculator.png 250w,\n/static/eeee3077a76c1eb3e3d8cfbb7ebde1d2/0b533/calculator.png 500w,\n/static/eeee3077a76c1eb3e3d8cfbb7ebde1d2/00d43/calculator.png 1000w,\n/static/eeee3077a76c1eb3e3d8cfbb7ebde1d2/21b4d/calculator.png 1280w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\nwhere a gardener can enter a location and temperature, and they need to be able to get an estimate of the <em>date</em> when the weather will be <em>no colder</em> than that temperature.</p>\n<p>Here’s how the data flow works</p>\n<ul>\n<li>The UI component is <code>packages/client/src/pages/CalculatorsPage.svelte</code></li>\n<li>The request initiates from the client at <code>packages/client/src/lib/repositories/location-temperature-data.repository.ts</code> in the <code>calculateDate</code> method</li>\n<li>The request/response shapes are described here <code>packages/types/src/resources/locations-calculate-date.ts</code></li>\n<li>And ultimately the location service is <code>packages/server/src/services/location.ts</code> which makes the calculation and returns a date, which bubbles back up to the UI. You may notice that there’s a data file being read and we’re not doing anything with it yet (perhaps we should?)</li>\n</ul>\n<p>We have a very basic model for <code>Location</code> here\n<code>packages/server/src/entities/location.ts</code> — but we’ll need to do more in order to complete this task.</p>\n<h3 id=\"before-you-begin\" style=\"position:relative;\"><a href=\"#before-you-begin\" aria-label=\"before you begin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Before you begin</h3>\n<p>Think about value objects and entities? Can we draw a simple diagram of what we plant to build?</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#value-objects\">Value Objects?</a></p>\n<ul>\n<li><a href=\"#typeorm\">TypeORM</a></li>\n<li><a href=\"#the-peashoottypes-package\">The <code>@peashoot/types</code> package</a></li>\n</ul>\n</li>\n<li><a href=\"#entities\">Entities</a></li>\n<li>\n<p><a href=\"#our-task\">Our task</a></p>\n<ul>\n<li><a href=\"#before-you-begin\">Before you begin</a></li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/course/domain-modeling-with-ts/02-value-objects-and-entities/"},"frontmatter":{"title":"Value Objects & Entities","course":"domain-modeling-with-ts","date":"June 10, 2025","description":"In this chapter, we'll explore root-level persisted entities and the rich data types they are comprised of"}}},"pageContext":{"slug":"/course/domain-modeling-with-ts/02-value-objects-and-entities/","title":"Value Objects & Entities","course":"domain-modeling-with-ts","date":"2025-06-10T09:00:00.000Z","previous":{"fields":{"slug":"/course/domain-modeling-with-ts/06-bounded-contexts/"},"frontmatter":{"title":"Bounded contexts","date":"2025-06-10T09:00:00.000Z","course":"domain-modeling-with-ts","isExercise":null}},"next":{"fields":{"slug":"/course/domain-modeling-with-ts/07-raised-beds-domain-discussion/"},"frontmatter":{"title":"Domain Modeling: Garden (discussion)","date":"2025-06-10T09:00:00.000Z","course":"domain-modeling-with-ts","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}