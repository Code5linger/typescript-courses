{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/monorepos-v2/04-extracting-models/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"monorepos-v2","name":"TypeScript Monorepos v2","summary":null},{"id":"domain-modeling-with-ts","name":"Domain modeling for humans and AI","summary":"Learn how to model a domain in TypeScript, and how to collaborate with domain experts and agentic AI coding tools to build a software system that solves real problems.\n"},{"id":"fundamentals-v3","name":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"fundamentals-v4","name":"TypeScript Fundamentals v4","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","name":"Intermediate TypeScript v1","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"intermediate-v2","name":"Intermediate TypeScript v2","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","name":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"enterprise-v2","name":"Enterprise-Scale TypeScript v2","summary":"Learn how to manage large TypeScript code bases with confidence and ease.\nIn this course, Mike shares his knowledge from years of experience working\nwith teams who maintain TypeScript projects with hundreds of regular full-time\ncontributors and 100K+ lines of code.\n"},{"id":"full-stack-typescript","name":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"}]}},"markdownRemark":{"id":"eb567f6f-906b-5c8f-b051-b9f69b426aef","excerpt":"Ok, so technicall we have a workspace now, but we haven’t realized any benefits yet. Everything is sort of still in one package. Let’s change that The @seeds…","html":"<p>Ok, so technicall we have a workspace now, but we haven’t realized any benefits yet. Everything is sort of still in one package. <em>Let’s change that</em></p>\n<h2 id=\"the-seedsmodels-package\" style=\"position:relative;\"><a href=\"#the-seedsmodels-package\" aria-label=\"the seedsmodels package permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The <code>@seeds/models</code> package</h2>\n<p>Let’s create a new <code>packages/models</code> folder</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">mkdir -p packages/models/src</span></div><div class='line'><span style=\"color: #24292F\">mkdir -p packages/models/tests</span></div></code></div></pre>\n<p>Move the contents of</p>\n<ul>\n<li><code>packages/ui/src/models</code> into our new <code>src</code> subfolder</li>\n<li><code>packages/ui/tests/models</code> into our new <code>tests</code> subfolder</li>\n</ul>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">mv packages/ui/src/models/</span><span style=\"color: #CF222E\">*</span><span style=\"color: #24292F\"> packages/models/src</span></div><div class='line'><span style=\"color: #24292F\">mv packages/ui/tests/models/</span><span style=\"color: #CF222E\">*</span><span style=\"color: #24292F\"> packages/models/tests</span></div></code></div></pre>\n<p>You’ll need to fix an import in the test file</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">import type {</span></div><div class='line'><span style=\"color: #24292F\">\tUSDAHardinessZoneRangeMap,</span></div><div class='line'><span style=\"color: #24292F\">\tDistance,</span></div><div class='line'><span style=\"color: #82071E\">- } from '../../src/models/seed-packet.model.js'</span></div><div class='line'><span style=\"color: #116329\">+ } from '../src/seed-packet.model.js'</span></div></code></div></pre>\n<p>Create a <code>packages/models/src/index.ts</code> file (the point will become clear in a moment)</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">*</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">'./seed-packet-collection.model.js'</span></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">*</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">'./seed-packet.model.js'</span></div></code></div></pre>\n<p>Now we need a very basic <code>packages/models/package.json</code>. Let’s start with this</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"name\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"@seeds/models\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"private\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0550AE\">true</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"version\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"0.0.0\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"type\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"module\"</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>We should add some basic dependencies. Some of you who are aware of spoilers may know I don’t need all of these, but it’s fine for now. </p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"devDependencies\"</span><span style=\"color: #24292F\">: {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"@eslint/js\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"^9.28.0\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"@types/node\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"^24.0.0\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"@vitest/coverage-v8\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"^3.2.3\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"eslint\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"^9.28.0\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"prettier\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"^3.5.3\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"typescript\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"~5.8.3\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"typescript-eslint\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"^8.34.0\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"vite\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"^6.3.5\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"vitest\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"^3.2.3\"</span></div><div class='line'><span style=\"color: #24292F\">  }</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>Run <code>pnpm i</code> in the root to set up these dependencies for this package, and then you should be able to run the tests and see that they work</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">pnpm --filter=@seeds/models </span><span style=\"color: #0550AE\">test</span></div></code></div></pre>\n<h2 id=\"exporting-from-the-package-root\" style=\"position:relative;\"><a href=\"#exporting-from-the-package-root\" aria-label=\"exporting from the package root permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exporting from the package root</h2>\n<p>This package is going to be a library, and we’ll end up exporting everything from the <em>package root</em>. This means from outside of this package, you’ll always import from <code>@seeds/models</code>.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { ... } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">'@seeds/models'</span></div></code></div></pre>\n<p>and ideally not something like. We’ll actually take steps to prevent this later in the course.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { ... } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">'@seeds/models/src/seed-packet-collection.model'</span></div></code></div></pre>\n<p>Packages that depend on this one will need to find the entry point for both execution of the code and the types. Add a <code>\"types\"</code> field to the <code>package.json</code> that points to the <code>dist/index.d.ts</code> file. This is why we created the <code>src/index.ts</code> file — it’s the entry point for the package.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"types\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"dist/index.d.ts\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"main\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"dist/index.js\"</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>We can copy-paste some of the scripts from the <code>@seeds/ui</code> package into this one.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"scripts\"</span><span style=\"color: #24292F\">: {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"test\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"vitest run\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"test:watch\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"vitest\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"test:ui\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"vitest --ui\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"test:coverage\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"vitest run --coverage\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"lint\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"eslint .\"</span></div><div class='line'><span style=\"color: #24292F\">  }</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>Let’s also add <code>build</code> and <code>dev</code> scripts — it’s an excuse for us to tackle some interesting tsconfig-related issues (we’ll get to that in a moment)</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"scripts\"</span><span style=\"color: #24292F\">: {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"build\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"tsc -p tsconfig.build.json\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"dev\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"tsc -p tsconfig.build.json --watch --preserveWatchOutput\"</span></div><div class='line'><span style=\"color: #24292F\">  }</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>this <code>tsconfig.build.json</code> file doesn’t exist yet, so this script won’t work</p>\n<h2 id=\"ts-configs-for-authoring-feedback-and-builds\" style=\"position:relative;\"><a href=\"#ts-configs-for-authoring-feedback-and-builds\" aria-label=\"ts configs for authoring feedback and builds permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TS configs, for authoring feedback and builds</h2>\n<p>We have a couple of needs we want to meet</p>\n<p>What we want in terms of type-checking:</p>\n<ul>\n<li>Authoring-time feedback in our IDE based <strong>and this includes feedback when writing our tests</strong></li>\n<li>A <code>check</code> npm script that alerts us to errors in <code>src</code> and <code>test</code> (and anything else we care about)</li>\n<li>When we build, we want to only compile the <code>src</code> folder</li>\n</ul>\n<p>Grab your <code>packages/ui/tsconfig.json</code> and move it to the project root.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">mv packages/ui/tsconfig.json tsconfig.json</span></div></code></div></pre>\n<p>You’re going to have to edit the paths in the <code>includes</code> array to point to files within any subfolder of <code>packages</code>.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"include\"</span><span style=\"color: #24292F\">: [</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"packages/*/src/**/*.ts\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"packages/*/src/**/*.js\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"packages/*/tests/**/*.ts\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"packages/*/tests/**/*.js\"</span></div><div class='line'><span style=\"color: #24292F\">  ]</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>Now create a new <code>packages/ui/tsconfig.json</code> file that extends the root <code>tsconfig.json</code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"extends\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"../../tsconfig.json\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"include\"</span><span style=\"color: #24292F\">: [</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"src/**/*\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"tests/**/*\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"src/**/*.svelte\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"tests/**/*.svelte\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"tailwind.config.js\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"postcss.config.cjs\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"vite.config.ts\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"svelte.config.js\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"eslint.config.mts\"</span></div><div class='line'><span style=\"color: #24292F\">  ]</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>After this change, it’s a good idea to restart your TS language server in your IDE to make sure everything is working as expected.</p>\n<p>This root-level <code>tsconfig.json</code> is going to be the source of truth for “strictness” compiler settings across your entire monorepo. You can of course make package-level customizations if you need to, but it’s useful to have a single place to set your defaults.</p>\n<p>Now let’s go back to our <code>@seeds/models</code> package and create a new <code>tsconfig.json</code> file that extends the root <code>tsconfig.json</code>. It’s the same as we did for the ui package, but with different <code>include</code> paths.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"extends\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"../../tsconfig.json\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"include\"</span><span style=\"color: #24292F\">: [</span><span style=\"color: #0A3069\">\"src/**/*\"</span><span style=\"color: #24292F\">, </span><span style=\"color: #0A3069\">\"tests/**/*\"</span><span style=\"color: #24292F\">]</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>and a <code>packages/models/tsconfig.build.json</code> file that extends the server-level <code>./tsconfig.json</code>, but specifically emits files and writes them to the <code>dist</code> folder. This should only include the <code>src</code> folder.</p>\n<p><code>packages/models/tsconfig.build.json</code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"extends\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"./tsconfig.json\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"compilerOptions\"</span><span style=\"color: #24292F\">: {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"outDir\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"./dist\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"rootDir\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"./src\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"declaration\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0550AE\">true</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"noEmit\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0550AE\">false</span></div><div class='line'><span style=\"color: #24292F\">  },</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"include\"</span><span style=\"color: #24292F\">: [</span><span style=\"color: #0A3069\">\"src/**/*\"</span><span style=\"color: #24292F\">]</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>Why extend the server package’s <code>tsconfig.json</code>? Because we want to make sure that we’re using the same strictness for visual feedback in our IDE and the build, but we also want to make sure that we’re only compiling the <code>src</code> folder.</p>\n<p>Now we can add a <code>check</code> script to our server package’s <code>package.json</code></p>\n<p><code>packages/models/package.json</code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"scripts\"</span><span style=\"color: #24292F\">: {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"check\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"tsc -p tsconfig.json\"</span></div><div class='line'><span style=\"color: #24292F\">  }</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>Now try running</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">pnpm --filter=@seeds/models build</span></div></code></div></pre>\n<p>and it should succeed. We now have a library in our monorepo!</p>\n<h2 id=\"integrating-seedsmodels-into-seedsui\" style=\"position:relative;\"><a href=\"#integrating-seedsmodels-into-seedsui\" aria-label=\"integrating seedsmodels into seedsui permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Integrating <code>@seeds/models</code> into <code>@seeds/ui</code></h2>\n<p>Now we need to integrate this new <code>@seeds/models</code> package into our <code>@seeds/ui</code> package — after all, our svelte components need this code in order to compile. </p>\n<p>Go to <code>packages/ui/package.json</code> and add <code>@seeds/models</code> to the <code>dependencies</code> object using the <code>workspace:*</code> syntax.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0A3069\">\"dependencies\"</span><span style=\"color: #24292F\">: {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"@seeds/models\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"workspace:*\"</span></div><div class='line'><span style=\"color: #24292F\">  }</span></div></code></div></pre>\n<p>We’re saying two things with this syntax:</p>\n<ul>\n<li>The <code>@seeds/models</code> package is a <em>workspace dependency</em></li>\n<li>We’re happy to use <em>any version of it</em>.</li>\n</ul>\n<p>pnpm will bias toward the locally linked package if it meets this version requirement, and will fall back to checking an external package registry like <code>registry.npmjs.org</code>.</p>\n<p>As usual, we’ve touched dependencies, so run <code>pnpm i</code> in the root to link everything up.</p>\n<p>Now, from the workspace root, run <code>pnpm check</code> and you should see some import paths that need to be updated. For example</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">- import type { SeedPacketModel } from '../models/seed-packet.model'</span></div><div class='line'><span style=\"color: #116329\">+ import type { SeedPacketModel } from '@seeds/models'</span></div></code></div></pre>\n<p>Once you fix all the import paths, you should be able to run</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">pnpm build </span><span style=\"color: #CF222E\">&&</span><span style=\"color: #24292F\"> \\</span></div><div class='line'><span style=\"color: #24292F\">pnpm </span><span style=\"color: #0550AE\">test</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">&&</span><span style=\"color: #24292F\"> \\</span></div><div class='line'><span style=\"color: #24292F\">pnpm check </span><span style=\"color: #CF222E\">&&</span><span style=\"color: #24292F\"> \\</span></div><div class='line'><span style=\"color: #24292F\">pnpm format</span></div></code></div></pre>\n<p>and it should complete successfully! Note that we haven’t included linting here — we’ll fix that later.</p>\n<p>Next, let’s disentangle the server from the UI part of the project, and factor it out into a new <code>@seeds/server</code> package.</p>","tableOfContents":"<ul>\n<li><a href=\"#the-seedsmodels-package\">The <code>@seeds/models</code> package</a></li>\n<li><a href=\"#exporting-from-the-package-root\">Exporting from the package root</a></li>\n<li><a href=\"#ts-configs-for-authoring-feedback-and-builds\">TS configs, for authoring feedback and builds</a></li>\n<li><a href=\"#integrating-seedsmodels-into-seedsui\">Integrating <code>@seeds/models</code> into <code>@seeds/ui</code></a></li>\n</ul>","fields":{"slug":"/course/monorepos-v2/04-extracting-models/"},"frontmatter":{"title":"Extracting Models","course":"monorepos-v2","date":"June 12, 2025","description":"We'll create a \"models\" package that both our ui and server depend on\n"}}},"pageContext":{"slug":"/course/monorepos-v2/04-extracting-models/","title":"Extracting Models","course":"monorepos-v2","date":"2025-06-12T09:00:00.000Z","previous":{"fields":{"slug":"/course/monorepos-v2/03-hello-workspace/"},"frontmatter":{"title":"Hello, Workspace!","date":"2025-06-12T09:00:00.000Z","course":"monorepos-v2","isExercise":null}},"next":{"fields":{"slug":"/course/monorepos-v2/05-extracting-server/"},"frontmatter":{"title":"Extracting Server","date":"2025-06-12T09:00:00.000Z","course":"monorepos-v2","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}