{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/monorepos-v2/09-knip/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"monorepos-v2","name":"TypeScript Monorepos v2","summary":null},{"id":"domain-modeling-with-ts","name":"Domain modeling for humans and AI","summary":"Learn how to model a domain in TypeScript, and how to collaborate with domain experts and agentic AI coding tools to build a software system that solves real problems.\n"},{"id":"fundamentals-v3","name":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"fundamentals-v4","name":"TypeScript Fundamentals v4","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","name":"Intermediate TypeScript v1","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"intermediate-v2","name":"Intermediate TypeScript v2","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","name":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"enterprise-v2","name":"Enterprise-Scale TypeScript v2","summary":"Learn how to manage large TypeScript code bases with confidence and ease.\nIn this course, Mike shares his knowledge from years of experience working\nwith teams who maintain TypeScript projects with hundreds of regular full-time\ncontributors and 100K+ lines of code.\n"},{"id":"full-stack-typescript","name":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"}]}},"markdownRemark":{"id":"442908e2-aaaf-5895-8efe-911cfa7a6eae","excerpt":"Trimming away unused dependencies and exports Knip is a tool that helps us trim away unused dependencies and exports from our packages. It works well with…","html":"<h2 id=\"trimming-away-unused-dependencies-and-exports\" style=\"position:relative;\"><a href=\"#trimming-away-unused-dependencies-and-exports\" aria-label=\"trimming away unused dependencies and exports permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Trimming away unused dependencies and exports</h2>\n<p>Knip is a tool that helps us trim away unused dependencies and exports from our packages. It works well with monorepos, and it’s a great way to detect extraneous dependencies, and potentially dead code (or over-exposed code) that TypeScript and ESLint aren’t sophisticated enough to detect.</p>\n<p>Install it</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">pnpm i -D knip</span></div></code></div></pre>\n<p>We need a small config file to tell Knip about entry points</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">\"workspaces\"</span><span style=\"color: #24292F\">: {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"packages/*\"</span><span style=\"color: #24292F\">: {</span></div><div class='line'><span style=\"color: #24292F\">   </span><span style=\"color: #0550AE\">\"entry\"</span><span style=\"color: #24292F\">: [</span><span style=\"color: #0A3069\">\"src/{index,main}.ts\"</span><span style=\"color: #24292F\">],</span></div><div class='line'><span style=\"color: #24292F\">   </span><span style=\"color: #0550AE\">\"project\"</span><span style=\"color: #24292F\">: [</span><span style=\"color: #0A3069\">\"src/**/*.{ts,tsx,svelte}\"</span><span style=\"color: #24292F\">]</span></div><div class='line'><span style=\"color: #24292F\">  }</span></div><div class='line'><span style=\"color: #24292F\"> },</span></div><div class='line'><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">\"ignoreDependencies\"</span><span style=\"color: #24292F\">: [</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0A3069\">\"syncpack\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0A3069\">\"@testing-library/svelte\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0A3069\">\"@tsconfig/svelte\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0A3069\">\"@vitest/coverage-v8\"</span></div><div class='line'><span style=\"color: #24292F\"> ]</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>Run it</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">pnpm knip</span></div></code></div></pre>\n<p>You’ll see a report of unused dependencies and exports. You can also run it with the <code>--fix</code> flag to remove the unused dependencies and exports.</p>\n<p>You may notice that sometimes it removes the <em>export</em> of a symbol, but doesn’t actually remove the code itself. Think about sequencing and how you could <em>both</em> remove the export and detect the dead code (have we been using another tool that might help detect an <em>unused function or variable</em>?)</p>","tableOfContents":"<ul>\n<li><a href=\"#trimming-away-unused-dependencies-and-exports\">Trimming away unused dependencies and exports</a></li>\n</ul>","fields":{"slug":"/course/monorepos-v2/09-knip/"},"frontmatter":{"title":"Removing Unused Dependencies and Exports","course":"monorepos-v2","date":"June 12, 2025","description":"Now we have several packages. What if we were publishing some of them for external consumption?\n"}}},"pageContext":{"slug":"/course/monorepos-v2/09-knip/","title":"Removing Unused Dependencies and Exports","course":"monorepos-v2","date":"2025-06-12T09:00:00.000Z","previous":{"fields":{"slug":"/course/monorepos-v2/08-prettier-linting/"},"frontmatter":{"title":"Code formatting","date":"2025-06-12T09:00:00.000Z","course":"monorepos-v2","isExercise":null}},"next":{"fields":{"slug":"/course/monorepos-v2/10-dev-script/"},"frontmatter":{"title":"Dev script","date":"2025-06-12T09:00:00.000Z","course":"monorepos-v2","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}